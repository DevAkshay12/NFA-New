sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t;var a;var o=location.href;const n=/PAN_Number='([^']+)'/;const s=o.match(n);if(s){a=s[1];console.log(a)}else{console.log("PAN Number not found")}return e.extend("nfaform.ext.controller.Objectpage",{override:{onInit:function(){},editFlow:{onAfterSave:async function(e){debugger;sap.m.MessageBox.confirm("Do you want to send for Approval?",{actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.NO],onClose:async function(t){if(t===sap.m.MessageBox.Action.YES){debugger;console.log("Save action confirmed");var o=e.context.getModel().bindContext(`/${"sendforapproval"}(...)`);var n={key:a,status:"Approval"};n=JSON.stringify(n);o.setParameter("data",n);await o.execute();let t=o.getBoundContext();let s=t.getObject();s=JSON.parse(s.value)}else{console.log("Save action cancelled")}}})}},routing:{onAfterBinding:async function(e){debugger;t=this.getView().getParent().getAppComponent().getManifestObject()._oBaseUri._string;var o=sap.ui.getCore().byId("nfaform::tab1ObjectPage--fe::CustomSubSection::Workflow--sampleTable");o.addStyleClass("workFlowTable");o.addStyleClass("sapUiRespGrid");o.addStyleClass("sapUiRespGridHSpace1");if(!o){console.error("Table not found.");return}var n={url:t+"odata/v4/catalog/PAN_WORKFLOW_HISTORY_APR",method:"GET",headers:{Accept:"application/json"}};new Promise((e,t)=>{$.ajax(n).done((t,n,s)=>{var r=new sap.ui.model.json.JSONModel;const l=t.value.filter(e=>e.PAN_Number===a);r.setData({PAN_WORKFLOW_HISTORY_APR:l});o.setModel(r);console.log(t);o.bindItems({path:"/PAN_WORKFLOW_HISTORY_APR",template:new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{PAN_Number}"}),new sap.m.Text({text:"{Employee_Name}"}),new sap.m.Text({text:"{level}"}),new sap.m.Text({text:"{Notification_Status}"}),new sap.m.Text({text:"{Approved_by}"})]})});e(t)}).fail(e=>{t(e)})});var s=[{header:"PAN Number",path:"PAN_Number"},{header:"Employee Name",path:"Employee_Name"},{header:"Level",path:"level"},{header:"Status",path:"Notification_Status"},{header:"Approved By",path:"Approved_by"}];o.destroyColumns();s.forEach(function(e){var t=new sap.m.Column({header:new sap.m.Text({text:e.header})});o.addColumn(t)})}}}})});
//# sourceMappingURL=Objectpage.controller.js.map